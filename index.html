<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>10" Portable Rack</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- React (UMD) -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

  <!-- Babel (so we can write JSX in this single file) -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body style="margin:0">
  <div id="root"></div>

  <script type="text/babel">
    const { useState } = React;

    const RACK_ITEMS = [
      {
        u: "0.5U",
        uNum: 0.5,
        name: "DC PDU Lite 7-CH",
        category: "power",
        brand: "DeskPi / GeeekPi",
        price: 35,
        watts: 2,
        description: "0.5U rack-mount DC power distribution. 7 outlets with individual switches. Powers all DC devices from a single adapter.",
        notes: "Central power distribution keeps things tidy. Most devices in this build run on 12V or 19V DC â€“ a single quality adapter feeds the PDU, short DC5521 jumper cables run to each device. No wall-wart spaghetti.",
        link: "deskpi.com",
      },
      {
        u: "0.5U",
        uNum: 0.5,
        name: "12-Port CAT6 Patch Panel",
        category: "network",
        brand: "DeskPi / GeeekPi",
        price: 18,
        watts: 0,
        description: "0.5U keystone patch panel. 12x CAT6 ports for clean front-panel cable management.",
        notes: "Punch down cables from each device to the rear, then short patch cables from the front to the CRS310 switch. Makes swapping or troubleshooting devices painless â€“ you never touch the back wiring once itâ€™s done.",
        link: "deskpi.com",
      },
      {
        u: "1U",
        uNum: 1,
        name: "CRS310-8G+2S+IN",
        category: "network",
        brand: "MikroTik",
        price: 160,
        watts: 34,
        description: "8x 2.5G Ethernet + 2x SFP+ (multi-rate: 1G/2.5G/10G). Dual-core 800MHz ARM. RouterOS v7 with full VLAN, ACL, LAG, L3 routing.",
        notes: "The backbone switch. All 8 RJ45 ports run at 2.5G natively â€“ every device in the rack connects here at full 2.5G speed. The 2x SFP+ cages can run at 2.5G with RJ45 SFP+ modules if you want, or you keep them as 10G expansion headroom for later. Runs full RouterOS v7 (not just SwOS), so you get proper VLAN trunking, ACL rules, and even hardware-offloaded L3 routing. Fits 10-inch rack with the RMK-2/10 bracket (snap off one side).",
        link: "mikrotik.com/product/crs310_8g_2s_in",
        extras: [{ name: "RMK-2/10 Bracket", price: 12 }],
        changed: true,
        changeNote: "Replaces CSS318-16G-2S+IN. All ports now 2.5G instead of 1G. Fewer ports (8 vs 16) but every port is faster. Full RouterOS instead of SwOS.",
      },
      {
        u: "1U",
        uNum: 1,
        name: "RB5009UG+S+IN",
        category: "network",
        brand: "MikroTik",
        price: 220,
        watts: 15,
        description: "Router/Firewall. 7x 1G + 1x 2.5G + 1x 10G SFP+. Quad-core ARM 1.4GHz, 1GB RAM. RouterOS v7. Full firewall, NAT, DHCP, DNS, VPN.",
        notes: "Unchanged from the 10G build â€“ and hereâ€™s why. The RB5009 is still the best 10-inch router regardless of your switch speed. It handles all routing between your 3 VLANs, runs the firewall rules, DHCP for each subnet, DNS, and NAT. Its 2.5G port connects to one CRS310 port, and the SFP+ connects to another if you want redundancy or a dedicated management link. The VLAN config from our earlier session applies directly.",
        link: "mikrotik.com/product/rb5009ug_s_in",
        extras: [{ name: "RMK-2x10/19 Bracket", price: 15 }],
      },
      {
        u: "0.5U",
        uNum: 0.5,
        name: "Brush Cable Manager",
        category: "accessory",
        brand: "DeskPi / GeeekPi",
        price: 10,
        watts: 0,
        description: "0.5U brush panel for clean cable pass-through between network and compute sections.",
        notes: "Visual separator between the networking tier (above) and compute tier (below). Cables pass through brushes instead of dangling around the sides. Small cost, big impact on cable management.",
      },
      {
        u: "1U",
        uNum: 1,
        name: "Proxmox Node 1 (Beelink EQ12 Pro)",
        category: "compute",
        brand: "Beelink",
        price: 350,
        watts: 15,
        description: "Intel N305 (8C/8T, 3.8GHz), 16GB DDR5, 500GB NVMe, dual Intel i226-V 2.5G Ethernet. Fanless-capable, tiny footprint.",
        notes: "The N305 is the sweet spot for a 2.5G homelab Proxmox node. 8 cores handle 20-30 containers comfortably. Dual 2.5G NICs mean one port for the management/trusted VLAN and one for VM traffic or a VLAN trunk. Draws only 10-15W idle. Upgrade RAM to 32GB DDR5 (~$80) for serious VM workloads. Fits on a standard 1U DeskPi shelf with room to spare.",
        link: "beelink.com",
        extras: [
          { name: "32GB DDR5-4800 Upgrade", price: 80 },
          { name: "1TB NVMe (WD SN770)", price: 90 },
          { name: "1U DeskPi Shelf (10-inch)", price: 12 },
        ],
        changed: true,
        changeNote: "Replaces Minisforum MS-01. Drops 10G SFP+ but gains massive cost savings (~$750 less per node). Dual 2.5G NICs match the switch tier perfectly.",
      },
      {
        u: "1U",
        uNum: 1,
        name: "Proxmox Node 2 (Beelink EQ12 Pro)",
        category: "compute",
        brand: "Beelink",
        price: 350,
        watts: 15,
        description: "Second identical N305 node for HA cluster. Same spec as Node 1.",
        notes: "Two-node Proxmox cluster gives live migration and redundancy. Identical hardware simplifies management. At ~15W idle each, both nodes together draw less than a single MS-01. Total cluster: 16 cores, 64GB RAM, 2TB NVMe â€“ more than enough for a portable homelab running Docker, VMs, n8n, and dev workloads.",
        extras: [
          { name: "32GB DDR5-4800 Upgrade", price: 80 },
          { name: "1TB NVMe (WD SN770)", price: 90 },
          { name: "1U DeskPi Shelf (10-inch)", price: 12 },
        ],
        changed: true,
        changeNote: "Same cost savings as Node 1. Pair runs at ~30W idle vs ~90W for the MS-01 pair.",
      },
      {
        u: "1U",
        uNum: 1,
        name: "Raspberry Pi 5 (8GB)",
        category: "compute",
        brand: "Raspberry Pi",
        price: 95,
        watts: 8,
        description: "Always-on lightweight services: Pi-hole/AdGuard DNS, UniFi Controller, WireGuard VPN, Home Assistant.",
        notes: "Sits in the DeskPi SBC tray. Runs independently of Proxmox â€“ survives reboots and maintenance windows. The 1G Ethernet connects to any CRS310 port (auto-negotiates down from 2.5G). Handles DNS, VPN, and controller duties at 8W.",
        extras: [
          { name: "DeskPi SBC Tray", price: 15 },
          { name: "NVMe HAT + 256GB NVMe", price: 45 },
        ],
      },
      {
        u: "2U",
        uNum: 2,
        name: '7.84" Touch LCD Monitor',
        category: "accessory",
        brand: "DeskPi / GeeekPi",
        price: 65,
        watts: 5,
        description: "1280x400 capacitive touch screen. USB-C/HDMI input. Rack-mounted status display.",
        notes: "Connect to the Pi via HDMI. Run a Grafana dashboard, btop, or custom status page showing VLAN health, bandwidth per subnet, container status. Looks great through the acrylic side panels. Optional but extremely satisfying.",
        link: "deskpi.com",
      },
      {
        u: "1U",
        uNum: 1,
        name: "Vented Blank Panel + Spare U",
        category: "accessory",
        brand: "DeskPi",
        price: 8,
        watts: 0,
        description: "Perforated blank panels for airflow and future expansion space.",
        notes: "Fills the remaining rack space. Keeps airflow moving through the rack. This is your expansion headroom â€“ swap for a NAS, additional node, or PoE injector as needs grow.",
      },
      {
        u: "0",
        uNum: 0,
        name: "UniFi U6 Pro AP (external)",
        category: "network",
        brand: "Ubiquiti",
        price: 230,
        watts: 15,
        description: "WiFi 6 AP. Ceiling/wall mount. Single cable carries 3 tagged VLANs from RB5009 ether5. PoE powered.",
        notes: "Lives outside the rack on ceiling or wall. The VLAN trunk config from our RB5009 session applies exactly: ether5 carries tagged VLANs 10, 20, 30 to the AP. Three SSIDs map to three VLANs. PoE injector or a small PoE switch powers it.",
        external: true,
      },
    ];

    const CATEGORIES = {
      power: { label: "Power", color: "#d35400", icon: "âš¡" },
      network: { label: "Networking", color: "#2471a3", icon: "ðŸŒ" },
      compute: { label: "Compute", color: "#1e8449", icon: "ðŸ–¥" },
      accessory: { label: "Accessory", color: "#7d3c98", icon: "ðŸ”§" },
    };

    const VLANS = [
      { id: 10, name: "Trusted / Personal", subnet: "10.0.10.0/24", color: "#2ecc71", desc: "Your devices, laptops, phones" },
      { id: 20, name: "Servers / Lab", subnet: "10.0.20.0/24", color: "#3498db", desc: "Proxmox nodes, containers, NAS" },
      { id: 30, name: "IoT / Untrusted", subnet: "10.0.30.0/24", color: "#e74c3c", desc: "Smart home, cameras, guests" },
    ];

    function RackBuild() {
      const [selected, setSelected] = useState(null);
      const [tab, setTab] = useState("rack");

      const rackItems = RACK_ITEMS.filter((i) => !i.external);
      const externalItems = RACK_ITEMS.filter((i) => i.external);
      const totalU = rackItems.reduce((s, i) => s + i.uNum, 0);
      const totalWatts = rackItems.reduce((s, i) => s + i.watts, 0);

      const totalCost = RACK_ITEMS.reduce((s, i) => {
        let base = i.price;
        if (i.extras) base += i.extras.reduce((es, e) => es + e.price, 0);
        return s + base;
      }, 0);

      const selectedItem = selected !== null ? RACK_ITEMS[selected] : null;
      const cat = selectedItem ? CATEGORIES[selectedItem.category] : null;

      return (
        <div
          style={{
            fontFamily: "'JetBrains Mono', 'SF Mono', 'Fira Code', monospace",
            background: "#09090b",
            color: "#e0e0e0",
            minHeight: "100vh",
            padding: "20px 24px",
          }}
        >
          <style>{`
            * { box-sizing: border-box; margin: 0; padding: 0; }
            ::-webkit-scrollbar { width: 5px; }
            ::-webkit-scrollbar-track { background: transparent; }
            ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
            @keyframes fadeIn { from { opacity: 0; transform: translateY(6px); } to { opacity: 1; transform: translateY(0); } }
          `}</style>

          {/* Header */}
          <div style={{ maxWidth: 1120, margin: "0 auto 20px" }}>
            <div style={{ display: "flex", alignItems: "baseline", gap: 12, marginBottom: 6 }}>
              <h1 style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 26, fontWeight: 700, color: "#fff", letterSpacing: "-0.5px" }}>
                10" PORTABLE RACK
              </h1>
              <span style={{ fontSize: 11, color: "#444", fontWeight: 500, background: "#1a1a1e", padding: "3px 8px", borderRadius: 4, border: "1px solid #2471a3" }}>
                2.5G EDITION
              </span>
            </div>
            <div style={{ height: 2, background: "linear-gradient(90deg, #2471a3 0%, #1e8449 50%, #d35400 100%)", marginBottom: 12, borderRadius: 1, opacity: 0.7 }} />
            <div style={{ display: "flex", gap: 24, fontSize: 11, color: "#666", flexWrap: "wrap" }}>
              <span>RACK <strong style={{ color: "#ccc" }}>{totalU}U / 12U</strong></span>
              <span>POWER <strong style={{ color: "#d35400" }}>~{totalWatts}W</strong></span>
              <span>COST <strong style={{ color: "#1e8449" }}>~${totalCost.toLocaleString()} AUD</strong></span>
              <span>VLANs <strong style={{ color: "#2471a3" }}>3 subnets + WAN</strong></span>
              <span>BACKBONE <strong style={{ color: "#ccc" }}>2.5 Gbps</strong></span>
            </div>
          </div>

          {/* Tab bar */}
          <div style={{ maxWidth: 1120, margin: "0 auto 16px", display: "flex", gap: 2 }}>
            {[
              { id: "rack", label: "Rack Layout" },
              { id: "vlans", label: "VLAN Design" },
              { id: "changes", label: "What Changed" },
            ].map((t) => (
              <button
                key={t.id}
                onClick={() => setTab(t.id)}
                style={{
                  fontFamily: "'JetBrains Mono', monospace",
                  fontSize: 11,
                  fontWeight: tab === t.id ? 600 : 400,
                  color: tab === t.id ? "#fff" : "#666",
                  background: tab === t.id ? "#1a1a1e" : "transparent",
                  border: `1px solid ${tab === t.id ? "#333" : "transparent"}`,
                  borderRadius: 4,
                  padding: "6px 14px",
                  cursor: "pointer",
                  transition: "all 0.15s",
                }}
              >
                {t.label}
              </button>
            ))}
          </div>

          {/* Main content */}
          <div style={{ maxWidth: 1120, margin: "0 auto" }}>
            {/* ========== RACK TAB ========== */}
            {tab === "rack" && (
              <div style={{ display: "grid", gridTemplateColumns: "320px 1fr", gap: 20 }}>
                {/* Rack column */}
                <div>
                  <div style={{ background: "#111113", border: "1px solid #1e1e22", borderRadius: 8, padding: 10 }}>
                    <div style={{ fontSize: 9, color: "#444", textAlign: "center", marginBottom: 6, textTransform: "uppercase", letterSpacing: 2 }}>
                      Front View -- Click any slot
                    </div>

                    <div style={{ background: "#0a0a0c", border: "2px solid #161618", borderRadius: 4, padding: "6px 5px", display: "flex", flexDirection: "column", gap: 2 }}>
                      {rackItems.map((item, idx) => {
                        const globalIdx = RACK_ITEMS.indexOf(item);
                        const isSelected = selected === globalIdx;
                        const c = CATEGORIES[item.category];
                        const height = Math.max(item.uNum * 44, 26);

                        return (
                          <div
                            key={idx}
                            onClick={() => setSelected(isSelected ? null : globalIdx)}
                            style={{
                              height,
                              background: isSelected ? `${c.color}18` : "linear-gradient(180deg, #17171a 0%, #131315 100%)",
                              border: `1px solid ${isSelected ? c.color + "66" : "#1e1e22"}`,
                              borderRadius: 3,
                              display: "flex",
                              alignItems: "center",
                              padding: "0 8px",
                              cursor: "pointer",
                              transition: "all 0.15s",
                              position: "relative",
                              overflow: "hidden",
                            }}
                          >
                            <div style={{ position: "absolute", left: 0, top: 0, bottom: 0, width: 3, background: c.color, opacity: isSelected ? 1 : 0.3 }} />
                            <span style={{ fontSize: 8, color: "#444", width: 26, flexShrink: 0, paddingLeft: 4 }}>{item.u}</span>
                            <span style={{ fontSize: 10, fontWeight: isSelected ? 600 : 400, color: isSelected ? "#fff" : "#888", flex: 1, whiteSpace: "nowrap", overflow: "hidden", textOverflow: "ellipsis" }}>
                              {item.name}
                            </span>
                            {item.changed && <span style={{ fontSize: 7, color: "#d35400", marginRight: 4, fontWeight: 700 }}>NEW</span>}
                            {item.watts > 0 && <span style={{ fontSize: 8, color: "#555" }}>{item.watts}W</span>}
                          </div>
                        );
                      })}
                    </div>

                    {/* External */}
                    <div style={{ marginTop: 12 }}>
                      <div style={{ fontSize: 9, color: "#444", textTransform: "uppercase", letterSpacing: 1.5, marginBottom: 4, textAlign: "center" }}>External</div>
                      {externalItems.map((item) => {
                        const globalIdx = RACK_ITEMS.indexOf(item);
                        const isSelected = selected === globalIdx;
                        const c = CATEGORIES[item.category];

                        return (
                          <div
                            key={globalIdx}
                            onClick={() => setSelected(isSelected ? null : globalIdx)}
                            style={{
                              height: 32,
                              background: isSelected ? `${c.color}18` : "#131315",
                              border: `1px dashed ${isSelected ? c.color : "#282830"}`,
                              borderRadius: 3,
                              display: "flex",
                              alignItems: "center",
                              padding: "0 8px",
                              cursor: "pointer",
                              transition: "all 0.15s",
                            }}
                          >
                            <span style={{ fontSize: 10, color: "#777", flex: 1 }}>{item.name}</span>
                            <span style={{ fontSize: 8, color: "#555" }}>{item.watts}W</span>
                          </div>
                        );
                      })}
                    </div>

                    {/* Legend */}
                    <div style={{ display: "flex", gap: 10, justifyContent: "center", marginTop: 12, flexWrap: "wrap" }}>
                      {Object.entries(CATEGORIES).map(([k, v]) => (
                        <div key={k} style={{ display: "flex", alignItems: "center", gap: 4, fontSize: 9, color: "#555" }}>
                          <div style={{ width: 7, height: 7, borderRadius: 2, background: v.color }} />
                          {v.label}
                        </div>
                      ))}
                    </div>
                  </div>
                </div>

                {/* Detail column */}
                <div>
                  {selectedItem ? (
                    <div key={selected} style={{ background: "#111113", border: `1px solid ${cat.color}22`, borderRadius: 8, padding: 20, animation: "fadeIn 0.2s ease" }}>
                      <div style={{ display: "flex", alignItems: "center", gap: 10, marginBottom: 14 }}>
                        <div style={{ width: 34, height: 34, borderRadius: 6, background: `${cat.color}15`, border: `1px solid ${cat.color}33`, display: "flex", alignItems: "center", justifyContent: "center", fontSize: 16 }}>
                          {cat.icon}
                        </div>
                        <div>
                          <h2 style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 18, fontWeight: 700, color: "#fff" }}>{selectedItem.name}</h2>
                          <div style={{ fontSize: 10, color: "#666", marginTop: 1 }}>
                            {selectedItem.brand} | {selectedItem.u || "External"} | {selectedItem.watts}W | <span style={{ color: cat.color }}>{cat.label}</span>
                          </div>
                        </div>
                      </div>

                      <p style={{ fontSize: 12, lineHeight: 1.65, color: "#bbb", marginBottom: 14 }}>{selectedItem.description}</p>

                      <div style={{ background: "#0a0a0c", border: "1px solid #1a1a1e", borderRadius: 6, padding: 14, marginBottom: 14 }}>
                        <div style={{ fontSize: 9, color: "#555", textTransform: "uppercase", letterSpacing: 1, marginBottom: 6 }}>Why this choice</div>
                        <p style={{ fontSize: 11, lineHeight: 1.7, color: "#888" }}>{selectedItem.notes}</p>
                      </div>

                      {selectedItem.changed && (
                        <div style={{ background: "#1a1508", border: "1px solid #d3540033", borderRadius: 6, padding: 14, marginBottom: 14 }}>
                          <div style={{ fontSize: 9, color: "#d35400", textTransform: "uppercase", letterSpacing: 1, marginBottom: 6 }}>Changed from 10G build</div>
                          <p style={{ fontSize: 11, lineHeight: 1.7, color: "#b8860b" }}>{selectedItem.changeNote}</p>
                        </div>
                      )}

                      {/* Pricing */}
                      <div style={{ display: "flex", flexDirection: "column", gap: 5 }}>
                        <div style={{ display: "flex", justifyContent: "space-between", fontSize: 11, color: "#999" }}>
                          <span>Base unit</span>
                          <span style={{ fontWeight: 600 }}>~${selectedItem.price} AUD</span>
                        </div>
                        {selectedItem.extras && selectedItem.extras.map((e, i) => (
                          <div key={i} style={{ display: "flex", justifyContent: "space-between", fontSize: 10, color: "#666", paddingLeft: 12 }}>
                            <span>+ {e.name}</span>
                            <span>~${e.price}</span>
                          </div>
                        ))}
                        <div style={{ borderTop: "1px solid #1e1e22", paddingTop: 5, marginTop: 3, display: "flex", justifyContent: "space-between", fontSize: 12, fontWeight: 600, color: "#fff" }}>
                          <span>Subtotal</span>
                          <span>~${(selectedItem.price + (selectedItem.extras ? selectedItem.extras.reduce((s, e) => s + e.price, 0) : 0)).toLocaleString()} AUD</span>
                        </div>
                      </div>

                      {selectedItem.link && <div style={{ marginTop: 12, fontSize: 10, color: "#444" }}>Ref: {selectedItem.link}</div>}
                    </div>
                  ) : (
                    <div style={{ background: "#111113", border: "1px solid #1e1e22", borderRadius: 8, padding: 32, textAlign: "center", display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center", gap: 12, minHeight: 300 }}>
                      <div style={{ fontSize: 28, opacity: 0.2 }}>{"\u2190"}</div>
                      <p style={{ fontSize: 12, color: "#444", maxWidth: 260, lineHeight: 1.6 }}>Click any slot in the rack to see specs, reasoning, and pricing.</p>
                    </div>
                  )}
                </div>
              </div>
            )}

            {/* ========== VLANS TAB ========== */}
            {tab === "vlans" && (
              <div style={{ animation: "fadeIn 0.2s ease" }}>
                <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr 1fr", gap: 16, marginBottom: 24 }}>
                  {VLANS.map((v) => (
                    <div key={v.id} style={{ background: "#111113", border: `1px solid ${v.color}33`, borderRadius: 8, padding: 18 }}>
                      <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 10 }}>
                        <div style={{ width: 10, height: 10, borderRadius: 3, background: v.color }} />
                        <span style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 15, fontWeight: 600, color: "#fff" }}>VLAN {v.id}</span>
                      </div>
                      <div style={{ fontSize: 13, color: "#ccc", marginBottom: 4 }}>{v.name}</div>
                      <div style={{ fontSize: 11, color: "#777", marginBottom: 8 }}>{v.desc}</div>
                      <div style={{ fontSize: 10, color: v.color, fontWeight: 600 }}>{v.subnet}</div>
                      <div style={{ fontSize: 10, color: "#555", marginTop: 4 }}>Gateway: {v.subnet.replace(".0/24", ".1")}</div>
                      <div style={{ fontSize: 10, color: "#555" }}>DHCP Pool: .100-.200</div>
                    </div>
                  ))}
                </div>

                <div style={{ background: "#111113", border: "1px solid #1e1e22", borderRadius: 8, padding: 20 }}>
                  <h3 style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 14, fontWeight: 600, color: "#fff", marginBottom: 14 }}>
                    Inter-VLAN Firewall Policy
                  </h3>

                  <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 10, fontSize: 11 }}>
                    {[
                      { from: "Trusted (10)", to: "Servers (20)", action: "ALLOW", color: "#2ecc71" },
                      { from: "Trusted (10)", to: "IoT (30)", action: "ALLOW", color: "#2ecc71" },
                      { from: "Trusted (10)", to: "Internet", action: "ALLOW", color: "#2ecc71" },
                      { from: "Servers (20)", to: "IoT (30)", action: "ALLOW", color: "#2ecc71" },
                      { from: "Servers (20)", to: "Internet", action: "ALLOW", color: "#2ecc71" },
                      { from: "Servers (20)", to: "Trusted (10)", action: "DROP", color: "#e74c3c" },
                      { from: "IoT (30)", to: "Internet", action: "ALLOW", color: "#2ecc71" },
                      { from: "IoT (30)", to: "Everything else", action: "DROP", color: "#e74c3c" },
                    ].map((r, i) => (
                      <div key={i} style={{ display: "flex", alignItems: "center", gap: 8, padding: "8px 12px", background: "#0a0a0c", borderRadius: 4, border: "1px solid #1a1a1e" }}>
                        <span style={{ color: "#999", flex: 1 }}>{r.from} {"\u2192"} {r.to}</span>
                        <span style={{ color: r.color, fontWeight: 700, fontSize: 10 }}>{r.action}</span>
                      </div>
                    ))}
                  </div>

                  <p style={{ fontSize: 10, color: "#555", marginTop: 12, lineHeight: 1.6 }}>
                    Stateful firewall on the RB5009. IoT devices can respond to connections initiated by Servers (established/related), but cannot initiate new connections back.
                  </p>
                </div>

                <div style={{ background: "#111113", border: "1px solid #1e1e22", borderRadius: 8, padding: 20, marginTop: 16 }}>
                  <h3 style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 14, fontWeight: 600, color: "#fff", marginBottom: 14 }}>
                    Port Allocation on CRS310
                  </h3>

                  <div style={{ display: "grid", gridTemplateColumns: "repeat(5, 1fr)", gap: 6, fontSize: 10 }}>
                    {[
                      { port: "1", device: "RB5009 (ether8 2.5G)", vlan: "Trunk", color: "#fff" },
                      { port: "2", device: "Proxmox Node 1", vlan: "VLAN 20", color: "#3498db" },
                      { port: "3", device: "Proxmox Node 2", vlan: "VLAN 20", color: "#3498db" },
                      { port: "4", device: "Raspberry Pi 5", vlan: "VLAN 20", color: "#3498db" },
                      { port: "5", device: "Desktop/Laptop", vlan: "VLAN 10", color: "#2ecc71" },
                      { port: "6", device: "IoT / Spare", vlan: "VLAN 30", color: "#e74c3c" },
                      { port: "7", device: "Spare", vlan: "--", color: "#555" },
                      { port: "8", device: "Spare", vlan: "--", color: "#555" },
                      { port: "SFP+ 1", device: "Future NAS", vlan: "--", color: "#555" },
                      { port: "SFP+ 2", device: "Expansion", vlan: "--", color: "#555" },
                    ].map((p, i) => (
                      <div key={i} style={{ background: "#0a0a0c", border: "1px solid #1a1a1e", borderRadius: 4, padding: "8px 6px", textAlign: "center" }}>
                        <div style={{ fontWeight: 700, color: "#ccc", marginBottom: 3 }}>Port {p.port}</div>
                        <div style={{ color: "#777", fontSize: 9, marginBottom: 2 }}>{p.device}</div>
                        <div style={{ color: p.color, fontSize: 9, fontWeight: 600 }}>{p.vlan}</div>
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}

            {/* ========== CHANGES TAB ========== */}
            {tab === "changes" && (
              <div style={{ animation: "fadeIn 0.2s ease" }}>
                <div style={{ background: "#111113", border: "1px solid #1e1e22", borderRadius: 8, padding: 20, marginBottom: 16 }}>
                  <h3 style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 16, fontWeight: 600, color: "#fff", marginBottom: 6 }}>
                    10G Build vs 2.5G Build
                  </h3>
                  <p style={{ fontSize: 12, color: "#888", lineHeight: 1.6, marginBottom: 16 }}>
                    Three components changed. Everything else stays identical -- including the RB5009 router, all VLAN/firewall config, the rack itself, and all accessories.
                  </p>

                  <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
                    {[
                      {
                        before: "CSS318-16G-2S+IN (16x 1G + 2x 10G SFP+)",
                        after: "CRS310-8G+2S+IN (8x 2.5G + 2x SFP+)",
                        why: "Every port is now 2.5x faster (2.5G vs 1G). Fewer ports but you only need 5-6 in the rack. Full RouterOS v7 instead of SwOS gives you proper VLAN management, ACLs, and L3 routing on the switch itself. The 2x SFP+ cages remain as 10G expansion headroom.",
                        savings: "+$20 saved",
                      },
                      {
                        before: "2x Minisforum MS-01 (i9-13900H, 64GB, dual 10G SFP+)",
                        after: "2x Beelink EQ12 Pro (N305, 32GB, dual 2.5G RJ45)",
                        why: "Massive cost reduction (~$1,300 saved across both nodes). The N305's 8 cores at 3.8GHz handle 20-30 containers and multiple VMs comfortably. Dual 2.5G NICs match the switch tier. Idle power drops from ~90W to ~30W for the pair. You lose the PCIe slot and SFP+ but gain simplicity and a smaller power footprint.",
                        savings: "~$1,300 saved",
                      },
                      {
                        before: "Total build: ~$3,150 AUD",
                        after: "Total build: ~$2,015 AUD",
                        why: "The 2.5G build costs roughly $1,135 less while delivering 2.5x the per-port bandwidth of the 1G access layer in the old design. The only real tradeoff is losing the 10G server-to-server fabric.",
                        savings: "~$1,135 total saved",
                      },
                    ].map((c, i) => (
                      <div key={i} style={{ background: "#0a0a0c", border: "1px solid #1a1a1e", borderRadius: 6, padding: 16 }}>
                        <div style={{ display: "flex", gap: 16, marginBottom: 10, fontSize: 11 }}>
                          <div style={{ flex: 1 }}>
                            <div style={{ fontSize: 9, color: "#666", textTransform: "uppercase", marginBottom: 3 }}>Before</div>
                            <div style={{ color: "#e74c3c", textDecoration: "line-through", opacity: 0.7 }}>{c.before}</div>
                          </div>
                          <div style={{ flex: 1 }}>
                            <div style={{ fontSize: 9, color: "#666", textTransform: "uppercase", marginBottom: 3 }}>After</div>
                            <div style={{ color: "#2ecc71" }}>{c.after}</div>
                          </div>
                          <div style={{ textAlign: "right" }}>
                            <div style={{ fontSize: 9, color: "#666", textTransform: "uppercase", marginBottom: 3 }}>Impact</div>
                            <div style={{ color: "#1e8449", fontWeight: 700, fontSize: 12 }}>{c.savings}</div>
                          </div>
                        </div>
                        <p style={{ fontSize: 11, color: "#777", lineHeight: 1.6 }}>{c.why}</p>
                      </div>
                    ))}
                  </div>
                </div>

                <div style={{ background: "#111113", border: "1px solid #1e1e22", borderRadius: 8, padding: 20 }}>
                  <h3 style={{ fontFamily: "'Space Grotesk', sans-serif", fontSize: 14, fontWeight: 600, color: "#fff", marginBottom: 10 }}>
                    What stays the same
                  </h3>
                  <div style={{ display: "grid", gridTemplateColumns: "1fr 1fr", gap: 8, fontSize: 11, color: "#888" }}>
                    {[
                      "RB5009 router/firewall -- exact same unit and config",
                      "3x VLAN architecture (Trusted/Servers/IoT)",
                      "All firewall rules (inter-VLAN policy unchanged)",
                      "UniFi AP with VLAN trunk on ether5",
                      "DeskPi RackMate T2 12U chassis",
                      "Pi 5 for always-on services",
                      "Patch panel, PDU, brush panel, LCD",
                      "RouterOS config script from our earlier session",
                    ].map((item, i) => (
                      <div key={i} style={{ padding: "8px 12px", background: "#0a0a0c", borderRadius: 4, border: "1px solid #1a1a1e", display: "flex", alignItems: "center", gap: 6 }}>
                        <span style={{ color: "#2ecc71", fontSize: 12 }}>{"\u2713"}</span>
                        {item}
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<RackBuild />);
  </script>
</body>
</html>
